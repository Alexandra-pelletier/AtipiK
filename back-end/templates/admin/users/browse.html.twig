{% extends 'admin/base.html.twig' %}

{% block title %}Liste des utilisateurs{% endblock %}

{% block body %}

{{parent()}}

<div class="rightSide">

<main>

    <h1 class="typeTitleList">Utilisateurs de AtipiK</h1>

<a href="{{path('admin_users_add')}}">
    <button type="edit" class="btn btn-primary">Ajouter un nouvel utilisateur</button>
	</a>

<table class="table table-hover">
    <thead>
        <tr class="table-primary">
            <th scope="col">ID</th>
            <th scope="col">Avatar</th>
            <th scope="col">Nom d'utilisateur</th>
            <th scope="col">Nom</th>
            <th scope="col">Pr√©nom</th>
            <th scope="col">Email</th>
            <th scope="col">Role</th>
            <th scope="col">Changer le role</th>
            <th scope="col">Supprimer</th>
        </tr>
    </thead>
    <tbody>
        {% for user in users %}
        <tr>
            <th scope="row">{{user.id}}</th>
            <td>{{user.avatar}}</td>
            <td>{{user.pseudo}}</td>
            <td>{{user.lastname}}</td>
            <td>{{user.firstname}}</td>
            <td>{{user.email}}</td>
            {% if (user.roles == ["ROLE_ADMIN"]) %}
             <td>Administrateur</td>
             {% else %}
             <td>Utilisateur</td>
             	{% endif %}
            <td>
						{% if (user.roles == ["ROLE_ADMIN"]) %}
                            <a href="{{ path('admin_users_submit', {'id' : user.id}) }}"><button type="submit" class="btn btn-secondary">Utilisateur</button></a>
						
                        {% elseif (user.roles == ["ROLE_USER"]) %}
							 <a href="{{ path('admin_users_submit', {'id' : user.id}) }}"><button type="submit" class="btn btn-success">Administrateur</button></a>

						{% endif %}
					</td>

          <td>{{ form(forms[loop.index0]) }}</td>
        </tr>
  {% endfor %}


	</tbody>
	</main>
	</div>

{% endblock %}